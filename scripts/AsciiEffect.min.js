class AsciiEffect{constructor(e,t=" .:-=+*#%@",o={}){const c=o.resolution||.15,l=o.scale||1,a=o.color||!1,n=o.alpha||!1,s=o.block||!1,r=o.invert||!1,i=o.strResolution||"low";let d,g;const f=document.createElement("div");f.style.cursor="default";const h=document.createElement("table");let p,m,u;f.appendChild(h),this.setSize=function(t,o){d=t,g=o,e.setSize(t,o),function(){p=Math.floor(d*c),m=Math.floor(g*c),y.width=p,y.height=m,u=e.domElement,u.style.backgroundColor&&(h.rows[0].cells[0].style.backgroundColor=u.style.backgroundColor,h.rows[0].cells[0].style.color=u.style.color);h.cellSpacing=0,h.cellPadding=0;const t=h.style;t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=M+"px",t.fontFamily=w,t.fontSize=S+"px",t.lineHeight=v+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,o){e.render(t,o),function(e){C.clearRect(0,0,p,m),C.drawImage(x,0,0,p,m);const t=C.getImageData(0,0,p,m).data;let o="";for(let e=0;e<m;e+=2){for(let c=0;c<p;c++){const l=4*(e*p+c),i=t[l],d=t[l+1],g=t[l+2],f=t[l+3];let h,m;m=(.3*i+.59*d+.11*g)/255,0==f&&(m=1),h=Math.floor((1-m)*(E.length-1)),r&&(h=E.length-h-1);let u=E[h];void 0!==u&&" "!=u||(u="&nbsp;"),o+=a?"<span style='color:rgb("+i+","+d+","+g+");"+(s?"background-color:rgb("+i+","+d+","+g+");":"")+(n?"opacity:"+f/255+";":"")+"'>"+u+"</span>":u}o+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${d}px;height:${g}px;overflow:hidden">${o}</td></tr>`}(h)},this.domElement=f;const b=" .,:;i1tfLCG08@".split(""),k=" CGO08@".split(""),w="courier new, monospace",x=e.domElement,y=document.createElement("canvas");if(!y.getContext)return;const C=y.getContext("2d");if(!C.getImageData)return;let E=a?k:b;t&&(E=t);const S=2/c*l,v=2/c*l;let M=0;if("low"==i)switch(l){case 1:M=-1;break;case 2:case 3:M=-2.1;break;case 4:M=-3.1;break;case 5:M=-4.15}if("medium"==i)switch(l){case 1:M=0;break;case 2:M=-1;break;case 3:M=-1.04;break;case 4:case 5:M=-2.1}if("high"==i)switch(l){case 1:case 2:M=0;break;case 3:case 4:case 5:M=-1}}}export{AsciiEffect};